{% extends "jobs/base.html" %}
{% block title %}Locations{% endblock %}
{% block content %}
<section class="container py-5">
  <h1 class="fw-bold mb-4">Jobs by Location</h1>
  <p class="text-muted mb-4">Find opportunities near you:</p>

  <div class="row g-3">
    {% for location in locations %}
      <div class="col-md-6 col-lg-4">
        <a href="{% url 'home' %}?location={{ location|urlencode }}" 
           class="d-block card p-3 text-decoration-none border-0 shadow-sm h-100">
          <div class="d-flex align-items-center">
            <div class="bg-primary text-white rounded-circle d-flex align-items-center justify-content-center me-3" style="width: 48px; height: 48px;">
              <i class="bi bi-geo-alt fs-4"></i>
            </div>
            <div>
              <h3 class="h5 mb-0">{{ location }}</h3>
            </div>
          </div>
        </a>
      </div>
    {% empty %}
      <p class="text-muted">No locations available.</p>
    {% endfor %}
  </div>
</section>
 <div class="text-center mt-5">
    {% url 'jobs_list' as jobs_list_url %}
    <a href="{{ jobs_list_url|default:'/' }}" class="btn btn-primary btn-lg px-5 mb-3">
      <i class="bi bi-search me-2"></i> Browse Jobs
    </a>

    {% url 'subscribe_newsletter' as subscribe_url %}
    {% if subscribe_url %}
      <form method="post" action="{{ subscribe_url }}" class="d-flex justify-content-center flex-wrap gap-2 mt-2">
        {% csrf_token %}
        <div class="flex-grow-1" style="max-width: 300px;">
          <input 
            type="email" 
            name="email" 
            placeholder="Enter your email" 
            required 
            class="form-control"
            aria-label="Email for newsletter"
          >
        </div>
        <button type="submit" class="btn btn-primary px-4">Update me</button>
      </form>

      {% if messages %}
        <div class="mt-3">
          {% for message in messages %}
            <div class="alert alert-{{ message.tags|default:'info' }} alert-dismissible fade show d-inline-block px-3 py-2" role="alert">
              {{ message }}
              <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
          {% endfor %}
        </div>
      {% endif %}
    {% else %}
      <p class="text-muted mt-3">Newsletter subscription is currently unavailable.</p>
    {% endif %}
  </div>
</section>

<style>
/* === PERFECT DARK MODE STYLES FOR JOB SEEKERS === */
body.dark-mode {
    color: #e2e8f0 !important;
}

body.dark-mode .card {
    background: #1e293b !important;
    border-color: #334155 !important;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3) !important;
}

body.dark-mode h1,
body.dark-mode h3,
body.dark-mode .fw-bold {
    color: #f1f5f9 !important;
}

body.dark-mode .text-body-secondary,
body.dark-mode .text-muted {
    color: #94a3b8 !important;
}

/* List items & checkmarks */
body.dark-mode ul li {
    color: #cbd5e1 !important;
}
body.dark-mode .bi-check-circle-fill {
    color: #10b981 !important;
}
body.dark-mode .bi-file-earmark-text,
body.dark-mode .bi-shield-check {
    color: #60a5fa !important;
}

/* Form elements */
body.dark-mode .form-control {
    background-color: #334155 !important;
    border-color: #475569 !important;
    color: #f1f5f9 !important;
}
body.dark-mode .form-control::placeholder {
    color: #94a3b8 !important;
    opacity: 1 !important;
}

/* Buttons */
body.dark-mode .btn-primary {
    background: #3b82f6 !important;
    border-color: #3b82f6 !important;
    color: white !important;
}
body.dark-mode .btn-primary:hover {
    background: #2563eb !important;
    border-color: #2563eb !important;
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(59, 130, 246, 0.25);
}

/* Alerts */
body.dark-mode .alert-success {
    background-color: #065f46 !important;
    color: #f0fdf4 !important;
    border-color: #0e7490 !important;
}
body.dark-mode .alert-danger {
    background-color: #7f1d1d !important;
    color: #fee2e2 !important;
    border-color: #b91c1c !important;
}
body.dark-mode .btn-close {
    filter: invert(1) grayscale(1) brightness(2);
}

/* Optional: subtle card hover lift */
body.dark-mode .card:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.5) !important;
}
</style>
{% endblock %}